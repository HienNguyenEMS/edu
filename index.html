<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduMan - Hệ thống Quản lý Trường học Toàn diện</title>

    <!-- Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Custom CSS -->
    <style>
        :root {
            --sidebar-width: 260px;
            --sidebar-collapsed-width: 72px;
            --header-height: 70px;
            /* Yêu cầu 2: Đổi màu thanh panel */
            --sidebar-bg: #1f2c3d; /* Màu xanh đen */
            --sidebar-header-bg: #141d28; /* Màu nền header của sidebar, đậm hơn một chút */
            --sidebar-link-color: #adb5bd;
            --sidebar-link-hover-color: #ffffff;
            --sidebar-link-active-color: #ffffff;
            --sidebar-link-hover-bg: #2c3e50;
            --bs-primary-rgb: 13, 110, 253;
            --bs-body-font-family: 'Be Vietnam Pro', sans-serif;
            --bs-body-bg: #f8f9fc;
        }
        .wrapper { display: flex; width: 100%; align-items: stretch; }
        #content { width: 100%; min-height: 100vh; transition: margin-left 0.3s ease-in-out; }
        #sidebar { display: flex; flex-direction: column; background: var(--sidebar-bg); color: var(--sidebar-link-hover-color); transition: all 0.3s ease-in-out; z-index: 1040; }
        #sidebar .sidebar-header { height: var(--header-height); display: flex; align-items: center; justify-content: space-between; padding: 0 15px; background: var(--sidebar-header-bg); flex-shrink: 0; }
        #sidebar .logo-container { text-decoration: none; color: white; display: flex; align-items: center; overflow: hidden; }
        #sidebar .logo { height: 40px; flex-shrink: 0; }
        #sidebar .logo-text { margin-left: 10px; font-weight: 700; font-size: 1.5rem; white-space: nowrap; transition: opacity 0.2s, width 0.2s, margin-left 0.2s; }
        #sidebar .components { padding: 15px 0; flex-grow: 1; overflow-y: auto; }
        #sidebar .components a { padding: 12px 20px; font-size: 0.95rem; display: flex; align-items: center; color: var(--sidebar-link-color); border-left: 4px solid transparent; text-decoration: none; transition: all 0.2s ease; white-space: nowrap; }
        #sidebar .components a:hover { color: var(--sidebar-link-hover-color); background: var(--sidebar-link-hover-bg); }
        #sidebar .components li.active > a { color: var(--sidebar-link-active-color); font-weight: 600; background: #0d6efd; border-left-color: #f8f9fa; }
        #sidebar .sidebar-heading { padding: 10px 20px; font-size: 0.75rem; color: #888; text-transform: uppercase; font-weight: 700; }
        #sidebar .fa-fw { font-size: 1.1rem; width: 30px; text-align: center; }
        #sidebar a[data-bs-toggle="collapse"] .collapse-icon { margin-left: auto; transition: transform 0.3s ease; font-size: 0.8rem; }
        #sidebar a[data-bs-toggle="collapse"][aria-expanded="true"] .collapse-icon { transform: rotate(-180deg); }
        #sidebar .collapse a { padding-left: calc(20px + 30px); font-size: 0.9rem; background: rgba(0,0,0,0.2); }
        .main-header { height: var(--header-height); display: flex; align-items: center; justify-content: space-between; padding: 0 1rem; background-color: #fff; border-bottom: 1px solid #e3e6f0; position: sticky; top: 0; z-index: 1020; }
        .main-content.active { animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .card { box-shadow: 0 0.15rem 1.75rem 0 rgba(58, 59, 69, 0.1); border: 1px solid #e3e6f0; }
        .card-header { font-weight: 600; color: #343a40; background-color: #f8f9fa; border-bottom: 1px solid #e3e6f0; }
        .table > thead { background-color: #f3f6fc; vertical-align: middle; }
        .table > thead th { font-weight: 600; border-bottom-width: 1px !important; border-color: #e3e6f0 !important; }
        .card-footer { background-color: #f8f9fa; border-top: 1px solid #e3e6f0; } /* Styling cho footer chứa pagination */
        #sidebar { position: fixed; top: 0; left: 0; height: 100vh; width: var(--sidebar-width); transform: translateX(-100%); }
        #sidebar.show { transform: translateX(0); }
        #sidebar-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.5); z-index: 1039; display: none; }
        #sidebar-overlay.active { display: block; }
        #content { margin-left: 0; }
        .nav-tabs-responsive { display: flex; flex-wrap: nowrap; overflow-x: auto; -webkit-overflow-scrolling: touch; }
        .nav-tabs-responsive .nav-link { white-space: nowrap; }
        .dashboard-menu-item { text-decoration: none; transition: transform 0.2s ease, box-shadow 0.2s ease; }
        .dashboard-menu-item:hover { transform: translateY(-5px); box-shadow: 0 0.5rem 1rem rgba(0,0,0,0.15); }
        
        @media (min-width: 992px) {
            #sidebar { position: fixed; transform: translateX(0); }
            #sidebar-overlay { display: none !important; }
            #content { margin-left: var(--sidebar-width); }
            body.sidebar-collapsed #content { margin-left: var(--sidebar-collapsed-width); }
            body.sidebar-collapsed #sidebar { width: var(--sidebar-collapsed-width); }
            body.sidebar-collapsed #sidebar .logo-container { justify-content: center; }
            body.sidebar-collapsed #sidebar .logo-text,
            body.sidebar-collapsed #sidebar .nav-link span,
            body.sidebar-collapsed #sidebar .collapse-icon,
            body.sidebar-collapsed #sidebar .sidebar-heading { opacity: 0; width: 0; height: 0; overflow: hidden; margin: 0; padding: 0; }
            body.sidebar-collapsed #sidebar .nav-link { justify-content: center; padding-left: 10px; padding-right: 10px; }
            body.sidebar-collapsed #sidebar .fa-fw { margin-right: 0 !important; font-size: 1.5rem; }
            body.sidebar-collapsed #sidebar .collapse.show { display: none; }
        }
    </style>
</head>
<body>

<div id="sidebar-overlay"></div>
<div class="wrapper">
    <!-- === START: Sidebar === -->
    <nav id="sidebar">
        <!-- Yêu cầu 2: Logo hiển thị bên trái, đã được đảm bảo bởi cấu trúc Flexbox. -->
        <div class="sidebar-header">
            <a href="#" class="logo-container nav-link" data-view="dashboard">
                <img src="https://cdn-icons-png.flaticon.com/512/2997/2997723.png" alt="Logo" class="logo">
                <span class="logo-text">EduMan</span>
            </a>
            <button class="btn btn-dark d-lg-block d-none" type="button" id="desktop-sidebar-toggle-btn"><i class="fas fa-bars"></i></button>
        </div>
        <ul class="list-unstyled components">
            <li class="active"><a href="#" class="nav-link" data-view="dashboard"><i class="fas fa-tachometer-alt fa-fw"></i><span>Tổng quan</span></a></li>
            
            <div class="sidebar-heading">Học vụ</div>
            <li>
                <a href="#studentSubmenu" data-bs-toggle="collapse" class="nav-link">
                    <i class="fas fa-user-graduate fa-fw"></i><span>Học sinh</span>
                    <i class="fas fa-chevron-down collapse-icon"></i>
                </a>
                <ul class="collapse list-unstyled" id="studentSubmenu">
                    <li><a href="#" class="nav-link" data-view="students"><span>Hồ sơ học sinh</span></a></li>
                    <li><a href="#" class="nav-link" data-view="discipline"><span>Khen thưởng & Kỷ luật</span></a></li>
                </ul>
            </li>
             <li>
                <a href="#classSubmenu" data-bs-toggle="collapse" class="nav-link">
                    <i class="fas fa-chalkboard-teacher fa-fw"></i><span>Lớp học</span>
                    <i class="fas fa-chevron-down collapse-icon"></i>
                </a>
                <ul class="collapse list-unstyled" id="classSubmenu">
                    <li><a href="#" class="nav-link" data-view="classes"><span>Danh sách Lớp</span></a></li>
                    <li><a href="#" class="nav-link" data-view="attendance"><span>Điểm danh</span></a></li>
                </ul>
            </li>

            <div class="sidebar-heading">Giảng dạy</div>
             <li>
                <a href="#teachingSubmenu" data-bs-toggle="collapse" class="nav-link">
                    <i class="fas fa-book-reader fa-fw"></i><span>Giảng dạy</span>
                    <i class="fas fa-chevron-down collapse-icon"></i>
                </a>
                <ul class="collapse list-unstyled" id="teachingSubmenu">
                    <li><a href="#" class="nav-link" data-view="timetable"><span>Thời khóa biểu</span></a></li>
                    <li><a href="#" class="nav-link" data-view="grades"><span>Học tập & Điểm số</span></a></li>
                    <li><a href="#" class="nav-link" data-view="teaching-log"><span>Sổ đầu bài điện tử</span></a></li>
                </ul>
            </li>

            <div class="sidebar-heading">Nội bộ</div>
             <li>
                <a href="#hrSubmenu" data-bs-toggle="collapse" class="nav-link">
                    <i class="fas fa-users-cog fa-fw"></i><span>Nhân sự</span>
                    <i class="fas fa-chevron-down collapse-icon"></i>
                </a>
                <ul class="collapse list-unstyled" id="hrSubmenu">
                    <li><a href="#" class="nav-link" data-view="teachers"><span>Hồ sơ CB-GV-NV</span></a></li>
                    <li><a href="#" class="nav-link" data-view="teacher-attendance"><span>Chấm công</span></a></li>
                    <li><a href="#" class="nav-link" data-view="leave"><span>Quản lý nghỉ phép</span></a></li>
                </ul>
            </li>
            <li>
                <a href="#financeSubmenu" data-bs-toggle="collapse" class="nav-link">
                    <i class="fas fa-wallet fa-fw"></i><span>Tài chính</span>
                    <i class="fas fa-chevron-down collapse-icon"></i>
                </a>
                <ul class="collapse list-unstyled" id="financeSubmenu">
                    <li><a href="#" class="nav-link" data-view="tuition"><span>Quản lý Học phí</span></a></li>
                    <li><a href="#" class="nav-link" data-view="finance-vouchers"><span>Các khoản Thu - Chi</span></a></li>
                </ul>
            </li>

            <div class="sidebar-heading">Tương tác</div>
             <li>
                <a href="#parentSubmenu" data-bs-toggle="collapse" class="nav-link">
                    <i class="fas fa-comments fa-fw"></i><span>Phụ huynh</span>
                    <i class="fas fa-chevron-down collapse-icon"></i>
                </a>
                <ul class="collapse list-unstyled" id="parentSubmenu">
                    <li><a href="#" class="nav-link" data-view="communication"><span>Sổ liên lạc điện tử</span></a></li>
                    <li><a href="#" class="nav-link" data-view="leave-requests"><span>Đơn xin nghỉ học</span></a></li>
                </ul>
            </li>
            
            <div class="sidebar-heading">Hệ thống</div>
            <li>
                <a href="#settingsSubmenu" data-bs-toggle="collapse" class="nav-link">
                    <i class="fas fa-cogs fa-fw"></i><span>Quản trị</span>
                    <i class="fas fa-chevron-down collapse-icon"></i>
                </a>
                <ul class="collapse list-unstyled" id="settingsSubmenu">
                    <li><a href="#" class="nav-link" data-view="announcements"><span>Thông báo chung</span></a></li>
                    <li><a href="#" class="nav-link" data-view="school-data"><span>Dữ liệu trường học</span></a></li>
                    <li><a href="#" class="nav-link" data-view="roles"><span>Phân quyền</span></a></li>
                    <li><a href="#" class="nav-link" data-view="user-guide"><span>Hướng dẫn sử dụng</span></a></li>
                </ul>
            </li>
        </ul>
    </nav>
    <!-- === END: Sidebar === -->

    <div id="content">
        <!-- === START: Header === -->
        <header class="main-header">
            <div class="d-flex align-items-center gap-2 w-100">
                <button class="btn border-0 d-lg-none" type="button" id="mobile-sidebar-toggle-btn"><i class="fas fa-bars fs-4"></i></button>
                <div class="input-group">
                    <span class="input-group-text bg-light border-0"><i class="fas fa-search"></i></span>
                    <input type="text" class="form-control bg-light border-0" id="global-search-input" placeholder="Tìm kiếm...">
                </div>
            </div>
             <!-- Yêu cầu 2: Phần này được đẩy sang phải nhờ `justify-content: space-between` trên parent và `w-100` trên div tìm kiếm. -->
            <div class="d-flex align-items-center flex-shrink-0 ms-3">
                 <div class="dropdown">
                    <a class="nav-link" href="#" role="button" data-bs-toggle="dropdown"><i class="fas fa-bell fa-fw fs-4 text-secondary"></i><span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">3<span class="visually-hidden">unread</span></span></a>
                    <ul class="dropdown-menu dropdown-menu-end shadow border-0" style="width: 350px;">
                        <li class="dropdown-header">Thông báo</li>
                        <li><a class="dropdown-item d-flex align-items-center" href="#"><div class="me-3"><div class="bg-primary text-white rounded-circle d-flex align-items-center justify-content-center" style="width: 40px; height: 40px;"><i class="fas fa-file-alt"></i></div></div><div><div class="small text-muted">10/07/2024</div><span class="fw-bold">Phụ huynh HS Nguyễn An có phản hồi mới.</span></div></a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item text-center small text-muted" href="#">Xem tất cả</a></li>
                    </ul>
                </div>
                <div class="dropdown ms-3">
                    <a class="nav-link dropdown-toggle d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown">
                        <img src="https://i.pravatar.cc/40?u=admin" alt="Avatar" width="40" height="40" class="rounded-circle me-2">
                        <div><strong class="d-block">Cô Hiệu Trưởng</strong><small class="text-muted">BGH</small></div>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end shadow border-0">
                        <li><a class="dropdown-item nav-link-profile" data-view="my-profile" href="#"><i class="fas fa-user-circle fa-fw me-2"></i>Thông tin cá nhân</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt fa-fw me-2"></i>Đăng xuất</a></li>
                    </ul>
                </div>
            </div>
        </header>
        <!-- === END: Header === -->
        <main id="main-content-area" class="p-3 p-lg-4"></main>
    </div>
</div>

<!-- === START: Modals (All modals are here) === -->
<!-- Student Modal -->
<div class="modal fade" id="student-modal" tabindex="-1" aria-labelledby="studentModalLabel" aria-hidden="true"><div class="modal-dialog modal-xl modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="studentModalLabel">Hồ sơ Học sinh</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form><h6 class="text-primary">Thông tin học sinh</h6><hr class="mt-1"><div class="row g-3"><div class="col-md-4"><label class="form-label">Mã học sinh</label><input type="text" class="form-control" placeholder="Hệ thống tự tạo..."></div><div class="col-md-4"><label class="form-label">Họ và tên</label><input type="text" class="form-control"></div><div class="col-md-4"><label class="form-label">Ngày sinh</label><input type="date" class="form-control"></div><div class="col-md-4"><label class="form-label">Giới tính</label><select class="form-select"><option>Nam</option><option>Nữ</option></select></div><div class="col-md-4"><label class="form-label">Lớp</label><select class="form-select"><option>10A1</option><option>11B2</option></select></div><div class="col-md-4"><label class="form-label">Trạng thái</label><select class="form-select"><option>Đang học</option><option>Thôi học</option></select></div></div><h6 class="text-primary mt-4">Thông tin phụ huynh</h6><hr class="mt-1"><div class="row g-3"><div class="col-md-6"><label class="form-label">Tên phụ huynh</label><input type="text" class="form-control"></div><div class="col-md-6"><label class="form-label">SĐT Phụ huynh</label><input type="tel" class="form-control"></div><div class="col-12"><label class="form-label">Địa chỉ</label><input type="text" class="form-control"></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button><button type="button" class="btn btn-primary">Lưu</button></div></div></div></div>
<!-- Teacher Modal -->
<div class="modal fade" id="teacher-modal" tabindex="-1" aria-labelledby="teacherModalLabel" aria-hidden="true"><div class="modal-dialog modal-xl modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="teacherModalLabel">Hồ sơ Cán bộ - Giáo viên - Nhân viên</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form><div class="row g-3"><div class="col-md-4"><label class="form-label">Mã nhân sự</label><input type="text" class="form-control"></div><div class="col-md-4"><label class="form-label">Họ và tên</label><input type="text" class="form-control"></div><div class="col-md-4"><label class="form-label">Ngày sinh</label><input type="date" class="form-control"></div><div class="col-md-4"><label class="form-label">Email</label><input type="email" class="form-control"></div><div class="col-md-4"><label class="form-label">Số điện thoại</label><input type="tel" class="form-control"></div><div class="col-md-4"><label class="form-label">Ngày vào làm</label><input type="date" class="form-control"></div><div class="col-md-4"><label class="form-label">Phòng ban/Tổ</label><select class="form-select"><option>Ban Giám Hiệu</option><option>Tổ Toán - Tin</option><option>Văn phòng</option></select></div><div class="col-md-4"><label class="form-label">Trình độ</label><input type="text" class="form-control" placeholder="Cử nhân, Thạc sĩ..."></div><div class="col-md-4"><label class="form-label">Trạng thái</label><select class="form-select"><option>Đang công tác</option><option>Nghỉ hưu</option><option>Thôi việc</option></select></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button><button type="button" class="btn btn-primary">Lưu</button></div></div></div></div>
<!-- Class Modal -->
<div class="modal fade" id="class-modal" tabindex="-1" aria-labelledby="classModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="classModalLabel">Thông tin Lớp học</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form><div class="row g-3"><div class="col-md-6"><label class="form-label">Tên lớp</label><input type="text" class="form-control"></div><div class="col-md-6"><label class="form-label">Năm học</label><select class="form-select"><option>2024-2025</option></select></div><div class="col-md-6"><label class="form-label">Khối</label><select class="form-select"><option>10</option><option>11</option><option>12</option></select></div><div class="col-md-6"><label class="form-label">Giáo viên Chủ nhiệm</label><select class="form-select"><option>Nguyễn Thị Mai</option><option>Trần Văn Hùng</option></select></div><div class="col-md-6"><label class="form-label">Sĩ số</label><input type="number" class="form-control"></div><div class="col-md-6"><label class="form-label">Trạng thái</label><select class="form-select"><option>Đang hoạt động</option><option>Đã kết thúc</option></select></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button><button type="button" class="btn btn-primary">Lưu</button></div></div></div></div>
<!-- Attendance Entry Modal -->
<div class="modal fade" id="attendance-entry-modal" tabindex="-1" aria-labelledby="attendanceEntryModalLabel" aria-hidden="true"><div class="modal-dialog modal-xl modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="attendanceEntryModalLabel">Điểm danh Lớp 10A1 - Ngày 11/07/2024</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="table-responsive"><table class="table table-bordered"><thead><tr><th>STT</th><th>Họ tên</th><th class="text-center">Trạng thái</th><th>Lý do</th></tr></thead><tbody><tr><td>1</td><td>Nguyễn Văn An</td><td class="text-center"><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="student1" id="s1_present" checked><label class="form-check-label" for="s1_present">Có mặt</label></div><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="student1" id="s1_absent_p"><label class="form-check-label" for="s1_absent_p">Vắng (P)</label></div><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="student1" id="s1_absent_k"><label class="form-check-label" for="s1_absent_k">Vắng (K)</label></div></td><td><input type="text" class="form-control form-control-sm"></td></tr><tr><td>2</td><td>Trần Thị Bình</td><td class="text-center"><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="student2" id="s2_present"><label class="form-check-label" for="s2_present">Có mặt</label></div><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="student2" id="s2_absent_p" checked><label class="form-check-label" for="s2_absent_p">Vắng (P)</label></div><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="student2" id="s2_absent_k"><label class="form-check-label" for="s2_absent_k">Vắng (K)</label></div></td><td><input type="text" class="form-control form-control-sm" value="Xin phép nghỉ ốm" readonly></td></tr><tr><td>3</td><td>Lê Thị Cẩm</td><td class="text-center"><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="student3" id="s3_present" checked><label class="form-check-label" for="s3_present">Có mặt</label></div><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="student3" id="s3_absent_p"><label class="form-check-label" for="s3_absent_p">Vắng (P)</label></div><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="student3" id="s3_absent_k"><label class="form-check-label" for="s3_absent_k">Vắng (K)</label></div></td><td><input type="text" class="form-control form-control-sm"></td></tr><tr><td>4</td><td>Phạm Văn Dũng</td><td class="text-center"><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="student4" id="s4_present"><label class="form-check-label" for="s4_present">Có mặt</label></div><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="student4" id="s4_absent_p"><label class="form-check-label" for="s4_absent_p">Vắng (P)</label></div><div class="form-check form-check-inline"><input class="form-check-input" type="radio" name="student4" id="s4_absent_k" checked><label class="form-check-label" for="s4_absent_k">Vắng (K)</label></div></td><td><input type="text" class="form-control form-control-sm" value="Đi muộn"></td></tr></tbody></table></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button><button type="button" class="btn btn-primary">Lưu điểm danh</button></div></div></div></div>
<!-- Teaching Log Modal -->
<div class="modal fade" id="teaching-log-modal" tabindex="-1" aria-labelledby="teachingLogModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="teachingLogModalLabel">Ghi Sổ đầu bài</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form><div class="row g-3"><div class="col-md-4"><label class="form-label">Ngày</label><input type="date" class="form-control"></div><div class="col-md-4"><label class="form-label">Lớp</label><select class="form-select"><option>10A1</option></select></div><div class="col-md-4"><label class="form-label">Tiết</label><input type="number" class="form-control"></div><div class="col-12"><label class="form-label">Nội dung bài học</label><textarea class="form-control" rows="2"></textarea></div><div class="col-12"><label class="form-label">Nhận xét tiết học</label><textarea class="form-control" rows="2"></textarea></div><div class="col-md-6"><label class="form-label">Sĩ số</label><input type="text" class="form-control" value="40" readonly></div><div class="col-md-6"><label class="form-label">Số HS vắng</label><input type="number" class="form-control"></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button><button type="button" class="btn btn-primary">Lưu</button></div></div></div></div>
<!-- Leave Request Modal (Student) -->
<div class="modal fade" id="leave-request-modal" tabindex="-1" aria-labelledby="leaveRequestModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="leaveRequestModalLabel">Chi tiết Đơn xin nghỉ học</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="mb-3"><p><strong>Học sinh:</strong> Trần Thị Bình - Lớp 10A1</p><p><strong>Phụ huynh:</strong> Trần Văn Nam</p><p><strong>Ngày gửi:</strong> 10/07/2024</p><p><strong>Ngày nghỉ:</strong> 11/07/2024</p><p><strong>Lý do:</strong> "Gia đình có việc đột xuất, xin cho cháu nghỉ 1 ngày. Trân trọng."</p></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button><button type="button" class="btn btn-danger">Từ chối</button><button type="button" class="btn btn-success">Duyệt</button></div></div></div></div>
<!-- Communication Modal -->
<div class="modal fade" id="communication-modal" tabindex="-1" aria-labelledby="communicationModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="communicationModalLabel">Gửi thông báo đến Phụ huynh</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form><div class="row g-3"><div class="col-12"><label class="form-label">Gửi đến</label><select class="form-select"><option>PH toàn trường</option><option>PH Khối 10</option><option>PH Lớp 10A1</option><option>PH em Nguyễn Văn An</option></select></div><div class="col-12"><label class="form-label">Tiêu đề</label><input type="text" class="form-control"></div><div class="col-12"><label class="form-label">Nội dung</label><textarea class="form-control" rows="5"></textarea></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button><button type="button" class="btn btn-primary"><i class="fas fa-paper-plane me-2"></i>Gửi</button></div></div></div></div>
<!-- Announcement Modal -->
<div class="modal fade" id="announcement-modal" tabindex="-1" aria-labelledby="announcementModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="announcementModalLabel">Tạo Thông báo chung</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form><div class="row g-3"><div class="col-12"><label class="form-label">Tiêu đề</label><input type="text" class="form-control"></div><div class="col-12"><label class="form-label">Đối tượng nhận</label><select class="form-select"><option>Toàn trường (GV, PH, HS)</option><option>Toàn bộ Giáo viên</option><option>Toàn bộ Phụ huynh</option></select></div><div class="col-12"><label class="form-label">Nội dung</label><textarea class="form-control" rows="4"></textarea></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button><button type="button" class="btn btn-primary">Đăng thông báo</button></div></div></div></div>
<!-- Tuition Fee Modal -->
<div class="modal fade" id="tuition-modal" tabindex="-1" aria-labelledby="tuitionModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="tuitionModalLabel">Tạo Khoản thu</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form><div class="row g-3"><div class="col-md-6"><label class="form-label">Năm học</label><select class="form-select"><option>2024-2025</option></select></div><div class="col-md-6"><label class="form-label">Kỳ thu</label><input type="text" class="form-control" placeholder="Học kỳ 1, Tháng 9..."></div><div class="col-md-6"><label class="form-label">Áp dụng cho Khối/Lớp</label><select class="form-select"><option>Toàn trường</option><option>Khối 10</option><option>Lớp 10A1</option></select></div><div class="col-md-6"><label class="form-label">Hạn nộp</label><input type="date" class="form-control"></div><div class="col-12"><label class="form-label">Nội dung thu</label><input type="text" class="form-control"></div><div class="col-md-6"><label class="form-label">Số tiền</label><input type="number" class="form-control"></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button><button type="button" class="btn btn-primary">Tạo và Gửi thông báo</button></div></div></div></div>
<!-- Discipline/Reward Modal -->
<div class="modal fade" id="discipline-modal" tabindex="-1" aria-labelledby="disciplineModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="disciplineModalLabel">Ghi nhận Khen thưởng/Kỷ luật</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form><div class="row g-3"><div class="col-md-6"><label class="form-label">Học sinh</label><select class="form-select"><option>Nguyễn Văn An (10A1)</option></select></div><div class="col-md-6"><label class="form-label">Ngày ghi nhận</label><input type="date" class="form-control"></div><div class="col-md-6"><label class="form-label">Phân loại</label><select class="form-select"><option>Khen thưởng</option><option>Kỷ luật</option></select></div><div class="col-md-6"><label class="form-label">Cấp</label><select class="form-select"><option>Cấp Lớp</option><option>Cấp Trường</option></select></div><div class="col-12"><label class="form-label">Nội dung</label><textarea class="form-control" rows="3"></textarea></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button><button type="button" class="btn btn-primary">Lưu</button></div></div></div></div>
<!-- Grade Entry Modal -->
<div class="modal fade" id="grade-modal" tabindex="-1" aria-labelledby="gradeModalLabel" aria-hidden="true"><div class="modal-dialog modal-xl modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="gradeModalLabel">Nhập điểm Lớp 10A1 - Môn Toán</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="table-responsive"><table class="table table-bordered table-sm"><thead><tr><th>STT</th><th>Họ và Tên</th><th>Điểm Miệng</th><th>Điểm 15p</th><th>Điểm 1 Tiết</th><th>Điểm HK</th></tr></thead><tbody><tr><td>1</td><td>Nguyễn Văn An</td><td><input type="text" class="form-control form-control-sm"></td><td><input type="text" class="form-control form-control-sm"></td><td><input type="text" class="form-control form-control-sm"></td><td><input type="text" class="form-control form-control-sm"></td></tr><tr><td>2</td><td>Trần Thị Bình</td><td><input type="text" class="form-control form-control-sm"></td><td><input type="text" class="form-control form-control-sm"></td><td><input type="text" class="form-control form-control-sm"></td><td><input type="text" class="form-control form-control-sm"></td></tr></tbody></table></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button><button type="button" class="btn btn-primary">Lưu điểm</button></div></div></div></div>
<!-- Role Modal -->
<div class="modal fade" id="role-modal" tabindex="-1" aria-labelledby="roleModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="roleModalLabel">Thêm/Sửa Vai trò</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form><div class="mb-3"><label class="form-label">Tên Vai Trò</label><input type="text" class="form-control"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button><button type="button" class="btn btn-primary">Lưu</button></div></div></div></div>
<!-- Leave (for teachers) Modal -->
<div class="modal fade" id="leave-modal" tabindex="-1" aria-labelledby="leaveModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="leaveModalLabel">Tạo Đơn nghỉ phép</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form><div class="row g-3"><div class="col-md-6"><label class="form-label">Loại phép</label><select class="form-select"><option>Nghỉ phép năm</option><option>Nghỉ ốm</option><option>Nghỉ không lương</option></select></div><div class="col-md-6"><label class="form-label">Số ngày nghỉ</label><input type="number" class="form-control" value="1"></div><div class="col-md-6"><label class="form-label">Từ ngày</label><input type="date" class="form-control"></div><div class="col-md-6"><label class="form-label">Đến ngày</label><input type="date" class="form-control"></div><div class="col-12"><label class="form-label">Lý do</label><textarea class="form-control" rows="3"></textarea></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button><button type="button" class="btn btn-primary"><i class="fas fa-paper-plane me-2"></i>Gửi đơn</button></div></div></div></div>
<!-- Teacher Attendance Modal -->
<div class="modal fade" id="teacher-attendance-modal" tabindex="-1" aria-labelledby="teacherAttendanceModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="teacherAttendanceModalLabel">Chấm công</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form><div class="row g-3"><div class="col-md-12"><label class="form-label">Nhân viên</label><select class="form-select"><option>Nguyễn Thị Mai</option><option>Trần Văn Hùng</option></select></div><div class="col-md-6"><label class="form-label">Giờ vào (Check-in)</label><input type="time" class="form-control"></div><div class="col-md-6"><label class="form-label">Giờ ra (Check-out)</label><input type="time" class="form-control"></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button><button type="button" class="btn btn-primary">Lưu</button></div></div></div></div>
<!-- Finance Voucher Modal -->
<div class="modal fade" id="finance-voucher-modal" tabindex="-1" aria-labelledby="financeVoucherModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="financeVoucherModalLabel">Tạo Phiếu Thu/Chi</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form><div class="row g-3"><div class="col-md-4"><label class="form-label">Loại phiếu</label><select class="form-select"><option>Phiếu Thu</option><option>Phiếu Chi</option></select></div><div class="col-md-4"><label class="form-label">Ngày</label><input type="date" class="form-control"></div><div class="col-md-4"><label class="form-label">Số tiền</label><input type="number" class="form-control"></div><div class="col-12"><label class="form-label">Nội dung</label><textarea class="form-control" rows="2"></textarea></div><div class="col-md-6"><label class="form-label">Người nộp/nhận</label><input type="text" class="form-control"></div><div class="col-md-6"><label class="form-label">Hạng mục</label><select class="form-select"><option>Chi văn phòng phẩm</option><option>Thu quỹ lớp</option></select></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button><button type="button" class="btn btn-primary">Lưu Phiếu</button></div></div></div></div>
<!-- Master Data Modal -->
<div class="modal fade" id="master-data-modal" tabindex="-1" aria-labelledby="masterDataModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="masterDataModalLabel">Thêm/Sửa</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form><div class="mb-3"><label class="form-label" id="master-data-name-label">Tên</label><input type="text" class="form-control"></div><div class="mb-3"><label class="form-label">Mô tả (nếu có)</label><textarea class="form-control" rows="2"></textarea></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button><button type="button" class="btn btn-primary">Lưu</button></div></div></div></div>
<!-- Guide Modal -->
<div class="modal fade" id="guide-modal" tabindex="-1" aria-labelledby="guideModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg modal-dialog-centered"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="guideModalLabel">Thêm/Sửa Hướng dẫn</h5><button type="button" class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><form><div class="row g-3"><div class="col-md-6"><label class="form-label">Tiêu đề</label><input type="text" class="form-control"></div><div class="col-md-6"><label class="form-label">Nhóm/Module</label><select class="form-select"><option>Quản lý Học sinh</option><option>Quản lý Giảng dạy</option></select></div><div class="col-md-6"><label class="form-label">Ảnh minh họa</label><input type="file" class="form-control"></div><div class="col-md-6"><label class="form-label">Link Video (YouTube)</label><input type="text" class="form-control" placeholder="Dán link YouTube vào đây..."></div><div class="col-12"><label class="form-label">Nội dung chi tiết</label><textarea class="form-control" rows="8"></textarea></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Đóng</button><button type="button" class="btn btn-primary">Lưu Hướng dẫn</button></div></div></div></div>
<!-- === END: Modals === -->


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const mainContentArea = document.getElementById('main-content-area');
    const globalSearchInput = document.getElementById('global-search-input');
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.getElementById('sidebar-overlay');
    const desktopSidebarToggleBtn = document.getElementById('desktop-sidebar-toggle-btn');
    const mobileSidebarToggleBtn = document.getElementById('mobile-sidebar-toggle-btn');

    let studentPerformanceChartInstance = null;
    let attendanceRateChartInstance = null;
    let bsTooltipList = [];
    
    // --- START: Pagination Snippet ---
    // Yêu cầu 3: Tạo một hàm để sinh mã HTML cho phân trang
    function createPaginationFooter(start, end, total) {
        return `
            <div class="card-footer">
                <div class="d-flex justify-content-between align-items-center">
                    <div class="text-muted small">
                        Hiển thị ${start}-${end} trên ${total} dòng
                    </div>
                    <nav aria-label="Page navigation">
                        <ul class="pagination pagination-sm mb-0">
                            <li class="page-item ${start === 1 ? 'disabled' : ''}">
                                <a class="page-link" href="#" tabindex="-1" aria-disabled="true"><i class="fas fa-chevron-left"></i></a>
                            </li>
                            <li class="page-item ${end >= total ? 'disabled' : ''}">
                                <a class="page-link" href="#"><i class="fas fa-chevron-right"></i></a>
                            </li>
                        </ul>
                    </nav>
                </div>
            </div>`;
    }
    // --- END: Pagination Snippet ---
    
    const searchPlaceholders = {
        dashboard: 'Tìm kiếm chung...', students: 'Tìm theo mã HS, tên, lớp...',
        grades: 'Tìm theo học sinh, lớp, môn học...', discipline: 'Tìm theo tên học sinh, loại vi phạm...',
        classes: 'Tìm kiếm lớp học...', attendance: 'Tìm kiếm điểm danh theo lớp, ngày...',
        timetable: 'Tìm kiếm theo lớp, giáo viên...', 'teaching-log': 'Tìm kiếm trong sổ đầu bài...',
        teachers: 'Tìm kiếm giáo viên theo tên, tổ...', 'teacher-attendance': 'Tìm kiếm chấm công GV...',
        leave: 'Tìm kiếm đơn nghỉ phép GV...', tuition: 'Tìm kiếm học sinh, trạng thái học phí...',
        'finance-vouchers': 'Tìm kiếm phiếu thu, chi...', communication: 'Tìm kiếm trao đổi, phụ huynh...',
        'leave-requests': 'Tìm kiếm đơn xin nghỉ của HS...', announcements: 'Tìm kiếm thông báo...',
        'school-data': 'Tìm kiếm dữ liệu trường học...', roles: 'Tìm kiếm vai trò...',
        'user-guide': 'Tìm kiếm hướng dẫn...', 'my-profile': 'Tìm kiếm trong thông tin cá nhân...',
    };
    
    // === START: All View Templates (UPDATED) ===
    const viewTemplates = {
        // Yêu cầu 1: Cập nhật trang Dashboard với menu nhanh
        dashboard: `
            <div class="row">
                <div class="col-lg-8">
                    <h4 class="mb-3">Truy cập nhanh</h4>
                    <div class="row g-3 mb-4">
                        <div class="col-6 col-md-4 col-lg-3">
                            <a href="#" class="card text-center p-3 h-100 justify-content-center dashboard-menu-item nav-link" data-view="students">
                                <i class="fas fa-user-graduate fa-3x text-primary mb-2"></i>
                                <h6 class="mb-0">QL Học sinh</h6>
                            </a>
                        </div>
                        <div class="col-6 col-md-4 col-lg-3">
                            <a href="#" class="card text-center p-3 h-100 justify-content-center dashboard-menu-item nav-link" data-view="classes">
                                <i class="fas fa-chalkboard-teacher fa-3x text-info mb-2"></i>
                                <h6 class="mb-0">QL Lớp học</h6>
                            </a>
                        </div>
                        <div class="col-6 col-md-4 col-lg-3">
                            <a href="#" class="card text-center p-3 h-100 justify-content-center dashboard-menu-item nav-link" data-view="grades">
                                <i class="fas fa-award fa-3x text-success mb-2"></i>
                                <h6 class="mb-0">QL Điểm số</h6>
                            </a>
                        </div>
                        <div class="col-6 col-md-4 col-lg-3">
                             <a href="#" class="card text-center p-3 h-100 justify-content-center dashboard-menu-item nav-link" data-view="timetable">
                                <i class="fas fa-calendar-alt fa-3x text-warning mb-2"></i>
                                <h6 class="mb-0">Thời khóa biểu</h6>
                            </a>
                        </div>
                         <div class="col-6 col-md-4 col-lg-3">
                             <a href="#" class="card text-center p-3 h-100 justify-content-center dashboard-menu-item nav-link" data-view="teachers">
                                <i class="fas fa-users-cog fa-3x text-secondary mb-2"></i>
                                <h6 class="mb-0">QL Nhân sự</h6>
                            </a>
                        </div>
                         <div class="col-6 col-md-4 col-lg-3">
                             <a href="#" class="card text-center p-3 h-100 justify-content-center dashboard-menu-item nav-link" data-view="tuition">
                                <i class="fas fa-wallet fa-3x text-danger mb-2"></i>
                                <h6 class="mb-0">QL Học phí</h6>
                            </a>
                        </div>
                         <div class="col-6 col-md-4 col-lg-3">
                             <a href="#" class="card text-center p-3 h-100 justify-content-center dashboard-menu-item nav-link" data-view="communication">
                                <i class="fas fa-comments fa-3x text-info mb-2"></i>
                                <h6 class="mb-0">Sổ liên lạc</h6>
                            </a>
                        </div>
                        <div class="col-6 col-md-4 col-lg-3">
                            <a href="#" class="card text-center p-3 h-100 justify-content-center dashboard-menu-item nav-link" data-view="announcements">
                                <i class="fas fa-bullhorn fa-3x text-primary mb-2"></i>
                                <h6 class="mb-0">Thông báo</h6>
                            </a>
                        </div>
                    </div>
                    <div class="card shadow-sm h-100 mb-4">
                        <div class="card-header">Tỷ lệ chuyên cần các Khối (Tuần này)</div>
                        <div class="card-body" style="position: relative; min-height:280px;"><canvas id="attendanceRateChart"></canvas></div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card shadow-sm mb-4">
                        <div class="card-header">Xếp loại Học lực (Học kỳ 1)</div>
                        <div class="card-body d-flex justify-content-center" style="min-height:200px;"><div id="studentPerformanceChart"></div></div>
                    </div>
                    <div class="card shadow-sm">
                        <div class="card-header">Hoạt động gần đây</div>
                        <ul class="list-group list-group-flush"><li class="list-group-item">GVCN lớp 12A1 vừa gửi thông báo mới.</li><li class="list-group-item">PH HS Trần An (10A2) xin phép nghỉ học.</li><li class="list-group-item">Đã cập nhật điểm thi giữa kỳ môn Toán.</li></ul>
                    </div>
                </div>
            </div>`,
        students: `<div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2"><h3>Hồ sơ Học sinh</h3><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#student-modal"><i class="fas fa-plus me-2"></i>Thêm học sinh</button></div><div class="card shadow-sm"><div class="card-header">Danh sách Học sinh</div><div class="card-body p-0"><div class="table-responsive"><table class="table table-hover align-middle mb-0"><thead><tr><th>Mã HS</th><th>Họ và Tên</th><th>Lớp</th><th>Trạng thái</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>HS-001</td><td><a href="#" class="nav-link p-0 fw-bold" data-view="student-detail">Nguyễn Văn An</a></td><td>10A1</td><td><span class="badge bg-success">Đang học</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-info nav-link" data-view="student-detail" title="Xem chi tiết"><i class="fas fa-eye"></i></button><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#student-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>HS-002</td><td><a href="#" class="nav-link p-0 fw-bold" data-view="student-detail">Trần Thị Bình</a></td><td>10A1</td><td><span class="badge bg-success">Đang học</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-info nav-link" data-view="student-detail" title="Xem chi tiết"><i class="fas fa-eye"></i></button><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#student-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>HS-003</td><td><a href="#" class="nav-link p-0 fw-bold" data-view="student-detail">Lê Minh Châu</a></td><td>11B2</td><td><span class="badge bg-danger">Thôi học</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-info nav-link" data-view="student-detail" title="Xem chi tiết"><i class="fas fa-eye"></i></button><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#student-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>HS-004</td><td><a href="#" class="nav-link p-0 fw-bold" data-view="student-detail">Phạm Thị Dung</a></td><td>12A3</td><td><span class="badge bg-info">Bảo lưu</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-info nav-link" data-view="student-detail" title="Xem chi tiết"><i class="fas fa-eye"></i></button><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#student-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr></tbody></table></div></div>${createPaginationFooter(1, 4, 1520)}</div>`,
        'student-detail': `<h3 class="mb-4">Hồ sơ chi tiết: Nguyễn Văn An</h3><div class="card mb-4"><div class="card-body"><div class="row align-items-center"><div class="col-md-2 text-center"><img src="https://i.pravatar.cc/150?u=student1" class="rounded-circle img-thumbnail"></div><div class="col-md-10"><p class="mb-1"><strong>Mã HS:</strong> HS-001</p><p class="mb-1"><strong>Lớp:</strong> 10A1 - <strong>GVCN:</strong> Cô Nguyễn Thị Mai</p><p class="mb-1"><strong>Ngày sinh:</strong> 10/05/2008 - <strong>Giới tính:</strong> Nam</p><p class="mb-0"><strong>Phụ huynh:</strong> Ông Nguyễn Văn B - <strong>SĐT:</strong> 0909123456</p></div></div></div></div><div class="card"><div class="card-body"><ul class="nav nav-tabs nav-tabs-responsive mb-3"><li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#tab-class-history">Lịch sử Lớp học</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-attendance-history">Lịch sử Điểm danh</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-tuition-history">Lịch sử Học phí</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-achievements">Thành tích & Khen thưởng</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-class-history"><table class="table table-sm table-bordered"><thead><th>Năm học</th><th>Lớp</th><th>Kết quả</th><th>Hạnh kiểm</th></thead><tbody><tr><td>2023-2024</td><td>9A1</td><td>Giỏi</td><td>Tốt</td></tr><tr><td>2022-2023</td><td>8A1</td><td>Giỏi</td><td>Tốt</td></tr></tbody></table></div><div class="tab-pane" id="tab-attendance-history"><table class="table table-sm table-bordered"><thead><th>Ngày</th><th>Trạng thái</th><th>Lý do</th></thead><tbody><tr><td>09/07/2024</td><td><span class="badge bg-danger">Vắng (P)</span></td><td>Nghỉ ốm</td></tr></tbody></table></div><div class="tab-pane" id="tab-tuition-history"><table class="table table-sm table-bordered"><thead><th>Kỳ thu</th><th>Số tiền</th><th>Trạng thái</th><th>Ngày đóng</th></thead><tbody><tr><td>Học phí HK1 24-25</td><td>5,000,000đ</td><td><span class="badge bg-danger">Chưa đóng</span></td><td></td></tr></tbody></table></div><div class="tab-pane" id="tab-achievements"><table class="table table-sm table-bordered"><thead><th>Ngày</th><th>Loại</th><th>Nội dung</th></thead><tbody><tr><td>05/09/2024</td><td>Khen thưởng</td><td>HSG cấp Trường môn Toán</td></tr></tbody></table></div></div></div></div>`,
        classes: `<div class="d-flex justify-content-between align-items-center mb-4"><h3>Danh sách Lớp học</h3><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#class-modal"><i class="fas fa-plus me-2"></i>Thêm Lớp</button></div><div class="card"><div class="card-header">Lớp học năm 2024-2025</div><div class="card-body p-0"><div class="table-responsive"><table class="table table-hover mb-0"><thead><tr><th>Tên Lớp</th><th>Khối</th><th>GVCN</th><th class="text-center">Sĩ số</th><th>Trạng thái</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>10A1</td><td>10</td><td>Nguyễn Thị Mai</td><td class="text-center">40</td><td><span class="badge bg-success">Đang hoạt động</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#class-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>11B2</td><td>11</td><td>Trần Văn Hùng</td><td class="text-center">42</td><td><span class="badge bg-success">Đang hoạt động</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#class-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>12A5</td><td>12</td><td>Lê Thị Thu</td><td class="text-center">38</td><td><span class="badge bg-success">Đang hoạt động</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#class-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>9A1 (23-24)</td><td>9</td><td>Phạm Văn An</td><td class="text-center">45</td><td><span class="badge bg-secondary">Đã kết thúc</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#class-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr></tbody></table></div></div>${createPaginationFooter(1, 4, 35)}</div>`,
        attendance: `<div class="d-flex justify-content-between align-items-center mb-4"><h3>Quản lý Điểm danh</h3><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#attendance-entry-modal"><i class="fas fa-plus me-2"></i>Điểm danh hôm nay</button></div><div class="card"><div class="card-header">Lịch sử điểm danh</div><div class="card-body"><div class="row g-3 mb-3"><div class="col-md-4"><input type="date" class="form-control" value="2024-07-11"></div><div class="col-md-4"><select class="form-select"><option>Tất cả lớp</option><option>10A1</option></select></div></div><div class="table-responsive"><table class="table table-hover"><thead><th>Ngày</th><th>Lớp</th><th class="text-center">Sĩ số</th><th class="text-center">Vắng</th><th class="text-center">Tỷ lệ</th><th>Trạng thái</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>11/07/2024</td><td>10A1</td><td class="text-center">40</td><td class="text-center">1</td><td class="text-center">97.5%</td><td><span class="badge bg-success">Hoàn tất</span></td><td class="text-center"><button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#attendance-entry-modal"><i class="fas fa-edit"></i> Sửa</button></td></tr><tr><td>11/07/2024</td><td>10A2</td><td class="text-center">42</td><td class="text-center">0</td><td class="text-center">100%</td><td><span class="badge bg-success">Hoàn tất</span></td><td class="text-center"><button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#attendance-entry-modal"><i class="fas fa-edit"></i> Sửa</button></td></tr><tr><td>10/07/2024</td><td>10A1</td><td class="text-center">40</td><td class="text-center">2</td><td class="text-center">95.0%</td><td><span class="badge bg-success">Hoàn tất</span></td><td class="text-center"><button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#attendance-entry-modal"><i class="fas fa-edit"></i> Sửa</button></td></tr><tr><td>10/07/2024</td><td>11B1</td><td class="text-center">38</td><td class="text-center">1</td><td class="text-center">97.4%</td><td><span class="badge bg-success">Hoàn tất</span></td><td class="text-center"><button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#attendance-entry-modal"><i class="fas fa-edit"></i> Sửa</button></td></tr></tbody></table></div></div>${createPaginationFooter(1, 4, 120)}</div>`,
        timetable: `<h3 class="mb-4">Thời khóa biểu</h3><div class="card"><div class="card-body"><div class="d-flex justify-content-between align-items-center mb-3"><ul class="nav nav-pills"><li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#view-table">Bảng</a></li></ul><div><select class="form-select d-inline-block w-auto me-2"><option>Lớp 10A1</option><option>Lớp 10A2</option></select><button class="btn btn-outline-primary"><i class="fas fa-upload me-2"></i>Nhập TKB</button></div></div><div class="tab-content"><div class="tab-pane active" id="view-table"><div class="table-responsive"><table class="table table-bordered text-center"><thead><tr><th>Tiết</th><th>Thứ 2</th><th>Thứ 3</th><th>Thứ 4</th><th>Thứ 5</th><th>Thứ 6</th><th>Thứ 7</th></tr></thead><tbody><tr><td>1</td><td>Toán</td><td>Lý</td><td>Văn</td><td>Hóa</td><td>Sử</td><td>GDCD</td></tr><tr><td>2</td><td>Toán</td><td>Lý</td><td>Văn</td><td>Hóa</td><td>Sử</td><td>GDQP</td></tr><tr><td>3</td><td>Anh</td><td>Sinh</td><td>Toán</td><td>Tin</td><td>Địa</td><td>SHL</td></tr><tr><td>4</td><td>Anh</td><td>Sinh</td><td>Toán</td><td>Tin</td><td>Địa</td><td>-</td></tr></tbody></table></div></div></div></div></div>`,
        grades: `<div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-2"><h3>Quản lý Học tập & Điểm số</h3></div><div class="card shadow-sm"><div class="card-header">Bảng điểm</div><div class="card-body"><div class="row g-3 mb-3 align-items-end"><div class="col-md-3"><label class="form-label">Lớp</label><select class="form-select"><option>10A1</option></select></div><div class="col-md-3"><label class="form-label">Môn học</label><select class="form-select"><option>Toán</option></select></div><div class="col-md-3"><label class="form-label">Học kỳ</label><select class="form-select"><option>Học kỳ 1</option></select></div><div class="col-md-3"><button class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#grade-modal"><i class="fas fa-edit me-2"></i>Nhập/Sửa điểm</button></div></div><div class="table-responsive"><table class="table table-bordered table-sm text-center"><thead><tr><th>STT</th><th class="text-start">Họ Tên</th><th>Miệng</th><th>15p</th><th>1 Tiết</th><th>HK</th><th>TBm</th></tr></thead><tbody><tr><td>1</td><td class="text-start">Nguyễn Văn An</td><td>9</td><td>8</td><td>8.5</td><td>9</td><td class="fw-bold">8.6</td></tr><tr><td>2</td><td class="text-start">Trần Thị Bình</td><td>8</td><td>7</td><td>7.5</td><td>8</td><td class="fw-bold">7.6</td></tr><tr><td>3</td><td class="text-start">Lê Thị Cẩm</td><td>10</td><td>9</td><td>9.5</td><td>9</td><td class="fw-bold">9.4</td></tr><tr><td>4</td><td class="text-start">Phạm Văn Dũng</td><td>7</td><td>6</td><td>5.5</td><td>6</td><td class="fw-bold text-danger">6.1</td></tr></tbody></table></div></div>${createPaginationFooter(1, 4, 40)}</div>`,
        'teaching-log': `<div class="d-flex justify-content-between align-items-center mb-4"><h3>Sổ đầu bài điện tử</h3><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#teaching-log-modal"><i class="fas fa-plus me-2"></i>Ghi sổ</button></div><div class="card"><div class="card-header">Lịch sử ghi sổ đầu bài</div><div class="card-body"><div class="row g-3 mb-3"><div class="col-md-3"><input type="date" class="form-control"></div><div class="col-md-3"><select class="form-select"><option>Lớp 10A1</option></select></div><div class="col-md-3"><select class="form-select"><option>Tất cả GV</option></select></div></div><div class="table-responsive"><table class="table table-hover"><thead><tr><th>Ngày</th><th>Tiết</th><th>Lớp</th><th>Môn</th><th>GV</th><th>Nội dung</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>10/07</td><td>1</td><td>10A1</td><td>Toán</td><td>Nguyễn Thị Mai</td><td>Bài 1: Phương trình bậc hai</td><td class="text-center"><button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#teaching-log-modal"><i class="fas fa-edit"></i></button></td></tr><tr><td>10/07</td><td>2</td><td>10A1</td><td>Lý</td><td>Trần Văn Hùng</td><td>Bài 2: Con lắc đơn</td><td class="text-center"><button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#teaching-log-modal"><i class="fas fa-edit"></i></button></td></tr><tr><td>09/07</td><td>3</td><td>11B2</td><td>Hóa</td><td>Lê Thị Thu</td><td>Bài 3: Axit và Bazo</td><td class="text-center"><button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#teaching-log-modal"><i class="fas fa-edit"></i></button></td></tr><tr><td>09/07</td><td>4</td><td>12A5</td><td>Văn</td><td>Phạm Văn An</td><td>Phân tích tác phẩm...</td><td class="text-center"><button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#teaching-log-modal"><i class="fas fa-edit"></i></button></td></tr></tbody></table></div></div>${createPaginationFooter(1, 4, 88)}</div>`,
        teachers: `<div class="d-flex justify-content-between align-items-center mb-4"><h3>Hồ sơ Cán bộ - Giáo viên - Nhân viên</h3><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#teacher-modal"><i class="fas fa-plus me-2"></i>Thêm mới</button></div><div class="card"><div class="card-header">Danh sách nhân sự</div><div class="card-body p-0"><div class="table-responsive"><table class="table table-hover mb-0"><thead><tr><th>Mã NS</th><th>Họ và Tên</th><th>Phòng/Tổ</th><th>Chức vụ</th><th>Trạng thái</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>GV-001</td><td>Nguyễn Thị Mai</td><td>Tổ Toán-Tin</td><td>Tổ trưởng</td><td><span class="badge bg-success">Đang công tác</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#teacher-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>GV-002</td><td>Trần Văn Hùng</td><td>Tổ Lý-Hóa-Sinh</td><td>Giáo viên</td><td><span class="badge bg-success">Đang công tác</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#teacher-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>VP-001</td><td>Lê Thị Thu</td><td>Văn phòng</td><td>Nhân viên</td><td><span class="badge bg-success">Đang công tác</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#teacher-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>BGH-01</td><td>Phạm Văn An</td><td>Ban Giám Hiệu</td><td>Phó Hiệu trưởng</td><td><span class="badge bg-danger">Đã nghỉ hưu</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#teacher-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr></tbody></table></div></div>${createPaginationFooter(1, 4, 80)}</div>`,
        'teacher-attendance': `<div class="d-flex justify-content-between align-items-center mb-4"><h3>Chấm công GV-NV</h3><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#teacher-attendance-modal"><i class="fas fa-plus me-2"></i>Chấm công thủ công</button></div><div class="card"><div class="card-header">Lịch sử chấm công</div><div class="card-body p-0"><div class="table-responsive"><table class="table table-hover mb-0"><thead><tr><th>Ngày</th><th>Nhân viên</th><th>Giờ vào</th><th>Giờ ra</th><th class="text-end">Tổng giờ</th><th>Trạng thái</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>10/07/2024</td><td>Nguyễn Thị Mai</td><td>07:28</td><td>16:35</td><td class="text-end">8.1h</td><td><span class="badge bg-success">Đúng giờ</span></td><td class="text-center"><button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#teacher-attendance-modal"><i class="fas fa-edit"></i></button></td></tr><tr><td>10/07/2024</td><td>Trần Văn Hùng</td><td>07:40</td><td>16:32</td><td class="text-end">7.9h</td><td><span class="badge bg-warning text-dark">Đi muộn</span></td><td class="text-center"><button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#teacher-attendance-modal"><i class="fas fa-edit"></i></button></td></tr><tr><td>09/07/2024</td><td>Nguyễn Thị Mai</td><td>07:25</td><td>16:01</td><td class="text-end">7.6h</td><td><span class="badge bg-danger">Về sớm</span></td><td class="text-center"><button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#teacher-attendance-modal"><i class="fas fa-edit"></i></button></td></tr><tr><td>09/07/2024</td><td>Lê Thu An</td><td>07:30</td><td>16:30</td><td class="text-end">8.0h</td><td><span class="badge bg-success">Đúng giờ</span></td><td class="text-center"><button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#teacher-attendance-modal"><i class="fas fa-edit"></i></button></td></tr></tbody></table></div></div>${createPaginationFooter(1, 4, 55)}</div>`,
        leave: `<div class="d-flex justify-content-between align-items-center mb-4"><h3>Quản lý Nghỉ phép (GV-NV)</h3><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#leave-modal"><i class="fas fa-plus me-2"></i>Tạo đơn</button></div><div class="card"><div class="card-header">Danh sách đơn nghỉ phép</div><div class="card-body p-0"><div class="table-responsive"><table class="table table-hover mb-0"><thead><tr><th>Người gửi</th><th>Phòng/Tổ</th><th>Từ ngày</th><th>Đến ngày</th><th>Lý do</th><th class="text-center">Trạng thái</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>Trần Văn Hùng</td><td>Tổ Lý-Hóa-Sinh</td><td>11/07/2024</td><td>12/07/2024</td><td>Việc gia đình</td><td class="text-center"><span class="badge bg-warning text-dark">Chờ duyệt</span></td><td class="text-center"><div class="btn-group btn-group-sm" role="group"><button type="button" class="btn btn-outline-secondary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"><i class="fas fa-check"></i></button><ul class="dropdown-menu"><li><a class="dropdown-item" href="#">Duyệt</a></li><li><a class="dropdown-item" href="#">Từ chối</a></li></ul></div></td></tr><tr><td>Nguyễn Thị Mai</td><td>Tổ Toán-Tin</td><td>08/07/2024</td><td>08/07/2024</td><td>Nghỉ ốm</td><td class="text-center"><span class="badge bg-success">Đã duyệt</span></td><td class="text-center"></td></tr><tr><td>Lê Thị Thu</td><td>Văn phòng</td><td>15/07/2024</td><td>20/07/2024</td><td>Nghỉ phép năm</td><td class="text-center"><span class="badge bg-danger">Từ chối</span></td><td class="text-center"></td></tr><tr><td>Phạm Văn An</td><td>BGH</td><td>12/07/2024</td><td>12/07/2024</td><td>Đi công tác</td><td class="text-center"><span class="badge bg-info">Đã duyệt (BGH)</span></td><td class="text-center"></td></tr></tbody></table></div></div>${createPaginationFooter(1, 4, 15)}</div>`,
        tuition: `<div class="d-flex justify-content-between align-items-center mb-4"><h3>Quản lý Học phí</h3><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#tuition-modal"><i class="fas fa-plus me-2"></i>Tạo khoản thu mới</button></div><div class="card"><div class="card-header">Theo dõi thu học phí - Học kỳ 1 (2024-2025)</div><div class="card-body p-0"><div class="table-responsive"><table class="table table-hover mb-0"><thead><tr><th>Mã HS</th><th>Họ và Tên</th><th>Lớp</th><th class="text-end">Phải thu</th><th class="text-center">Trạng thái</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>HS-001</td><td>Nguyễn Văn An</td><td>10A1</td><td class="text-end">5,000,000đ</td><td class="text-center"><span class="badge bg-success">Đã đóng</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-info"><i class="fas fa-receipt"></i></button></div></td></tr><tr><td>HS-002</td><td>Trần Thị Bình</td><td>10A1</td><td class="text-end">5,000,000đ</td><td class="text-center"><span class="badge bg-danger">Chưa đóng</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning">Gửi nhắc nhở</button><button class="btn btn-outline-success">Xác nhận</button></div></td></tr><tr><td>HS-003</td><td>Lê Minh Châu</td><td>11B2</td><td class="text-end">5,200,000đ</td><td class="text-center"><span class="badge bg-warning text-dark">Đóng một phần</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning">Gửi nhắc nhở</button><button class="btn btn-outline-success">Xác nhận</button></div></td></tr><tr><td>HS-004</td><td>Phạm Thị Dung</td><td>12A3</td><td class="text-end">4,800,000đ</td><td class="text-center"><span class="badge bg-info">Miễn giảm</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-info"><i class="fas fa-receipt"></i></button></div></td></tr></tbody></table></div></div>${createPaginationFooter(1, 4, 1488)}</div>`,
        'finance-vouchers': `<div class="d-flex justify-content-between align-items-center mb-4"><h3>Quản lý Thu - Chi</h3><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#finance-voucher-modal"><i class="fas fa-plus me-2"></i>Tạo Phiếu</button></div><div class="card"><div class="card-body"><ul class="nav nav-tabs nav-tabs-responsive mb-3"><li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#tab-receipts">Phiếu Thu</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-payments">Phiếu Chi</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-summary">Báo cáo</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-receipts"><div class="table-responsive"><table class="table table-hover"><thead><th>Ngày</th><th>Nội dung</th><th class="text-end">Số tiền</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>10/07</td><td>Thu quỹ lớp 10A1</td><td class="text-end text-success">+ 2,000,000</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#finance-voucher-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>08/07</td><td>Thu tiền đồng phục</td><td class="text-end text-success">+ 15,000,000</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#finance-voucher-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr></tbody></table></div>${createPaginationFooter(1, 2, 25)}</div><div class="tab-pane" id="tab-payments"><div class="table-responsive"><table class="table table-hover"><thead><th>Ngày</th><th>Nội dung</th><th class="text-end">Số tiền</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>09/07</td><td>Chi mua VPP</td><td class="text-end text-danger">- 1,500,000</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#finance-voucher-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr></tbody></table></div>${createPaginationFooter(1, 1, 30)}</div><div class="tab-pane" id="tab-summary"><h5 class="mb-3">Tổng hợp trong kỳ</h5><div class="row"><div class="col-md-4"><div class="card text-center bg-success-subtle text-success-emphasis h-100"><div class="card-header bg-transparent border-0 fw-bold">TỔNG THU</div><div class="card-body fs-4 fw-bolder">32,000,000</div></div></div><div class="col-md-4"><div class="card text-center bg-danger-subtle text-danger-emphasis h-100"><div class="card-header bg-transparent border-0 fw-bold">TỔNG CHI</div><div class="card-body fs-4 fw-bolder">- 22,000,000</div></div></div><div class="col-md-4"><div class="card text-center bg-primary-subtle text-primary-emphasis h-100"><div class="card-header bg-transparent border-0 fw-bold">TỒN QUỸ</div><div class="card-body fs-4 fw-bolder">10,000,000</div></div></div></div></div></div></div></div>`,
        communication: `<div class="d-flex justify-content-between align-items-center mb-4"><h3>Sổ liên lạc điện tử</h3><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#communication-modal"><i class="fas fa-paper-plane me-2"></i>Gửi thông báo mới</button></div><div class="card"><div class="card-header">Lịch sử trao đổi</div><div class="card-body p-0"><div class="table-responsive"><table class="table table-hover mb-0"><thead><tr><th>Ngày gửi</th><th>Người gửi</th><th>Đến</th><th>Tiêu đề</th><th class="text-center">Trạng thái</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>10/07</td><td>GVCN Lớp 10A1</td><td>PH Lớp 10A1</td><td>Thông báo họp PH</td><td class="text-center"><span class="badge bg-info">Đã gửi</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-info"><i class="fas fa-eye"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>09/07</td><td>PH em Trần Thị Bình</td><td>GVCN Lớp 10A1</td><td>Phản hồi về học tập</td><td class="text-center"><span class="badge bg-success">Đã trả lời</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-info"><i class="fas fa-eye"></i></button></div></td></tr><tr><td>08/07</td><td>BGH</td><td>Toàn trường</td><td>Thông báo nghỉ lễ</td><td class="text-center"><span class="badge bg-info">Đã gửi</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-info"><i class="fas fa-eye"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>07/07</td><td>PH em Nguyễn Văn An</td><td>GVCN Lớp 10A1</td><td>V/v xin phép nghỉ</td><td class="text-center"><span class="badge bg-warning text-dark">Chưa đọc</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-info"><i class="fas fa-eye"></i></button></div></td></tr></tbody></table></div></div>${createPaginationFooter(1, 4, 18)}</div>`,
        'leave-requests': `<div class="d-flex justify-content-between align-items-center mb-4"><h3>Quản lý Đơn xin nghỉ học</h3></div><div class="card"><div class="card-header">Danh sách đơn từ Phụ huynh</div><div class="card-body p-0"><div class="table-responsive"><table class="table table-hover mb-0"><thead><tr><th>Ngày gửi</th><th>Học sinh</th><th>Lớp</th><th>Ngày nghỉ</th><th class="text-center">Trạng thái</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>10/07</td><td>Trần Thị Bình</td><td>10A1</td><td>11/07/2024</td><td class="text-center"><span class="badge bg-warning text-dark">Chờ duyệt</span></td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#leave-request-modal"><i class="fas fa-eye"></i></button><button class="btn btn-outline-success"><i class="fas fa-check"></i></button><button class="btn btn-outline-danger"><i class="fas fa-times"></i></button></div></td></tr><tr><td>08/07</td><td>Nguyễn Văn An</td><td>10A1</td><td>09/07/2024</td><td class="text-center"><span class="badge bg-success">Đã duyệt</span></td><td class="text-center"><button class="btn btn-sm btn-outline-info" data-bs-toggle="modal" data-bs-target="#leave-request-modal"><i class="fas fa-eye"></i></button></td></tr><tr><td>07/07</td><td>Lê Minh Châu</td><td>11B2</td><td>08/07/2024</td><td class="text-center"><span class="badge bg-danger">Đã từ chối</span></td><td class="text-center"><button class="btn btn-sm btn-outline-info" data-bs-toggle="modal" data-bs-target="#leave-request-modal"><i class="fas fa-eye"></i></button></td></tr><tr><td>06/07</td><td>Phạm Thị Dung</td><td>12A3</td><td>07/07/2024</td><td class="text-center"><span class="badge bg-success">Đã duyệt</span></td><td class="text-center"><button class="btn btn-sm btn-outline-info" data-bs-toggle="modal" data-bs-target="#leave-request-modal"><i class="fas fa-eye"></i></button></td></tr></tbody></table></div></div>${createPaginationFooter(1, 4, 7)}</div>`,
        announcements: `<div class="d-flex justify-content-between align-items-center mb-4"><h3>Thông báo chung</h3><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#announcement-modal"><i class="fas fa-plus me-2"></i>Tạo thông báo</button></div><div class="card"><div class="card-header">Danh sách thông báo</div><div class="card-body p-0"><div class="table-responsive"><table class="table table-hover mb-0"><thead><tr><th>Ngày đăng</th><th>Tiêu đề</th><th>Đối tượng</th><th>Người tạo</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>10/07</td><td>Thông báo về lịch thi cuối kỳ</td><td>Toàn trường</td><td>BGH</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#announcement-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>08/07</td><td>Lịch họp Hội đồng Sư phạm</td><td>Toàn bộ Giáo viên</td><td>BGH</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#announcement-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>05/07</td><td>Thông báo nghỉ Lễ Quốc Khánh</td><td>Toàn trường</td><td>Văn phòng</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#announcement-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>01/07</td><td>Kế hoạch tuần 28</td><td>Toàn bộ Giáo viên</td><td>BGH</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#announcement-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr></tbody></table></div></div>${createPaginationFooter(1, 4, 12)}</div>`,
        discipline: `<div class="d-flex justify-content-between align-items-center mb-4"><h3>Khen thưởng & Kỷ luật</h3><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#discipline-modal"><i class="fas fa-plus me-2"></i>Thêm ghi nhận</button></div><div class="card"><div class="card-header">Lịch sử ghi nhận</div><div class="card-body p-0"><div class="table-responsive"><table class="table table-hover mb-0"><thead><tr><th>Ngày</th><th>Học sinh</th><th>Lớp</th><th>Phân loại</th><th>Nội dung</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>05/09</td><td>Nguyễn Văn An</td><td>10A1</td><td><span class="badge bg-success">Khen thưởng</span></td><td>Đạt giải Nhất thi HSG cấp Trường</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#discipline-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>03/09</td><td>Lê Văn Cường</td><td>11B2</td><td><span class="badge bg-danger">Kỷ luật</span></td><td>Vi phạm nội quy, đi học muộn</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#discipline-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>02/09</td><td>Trần Thị Bình</td><td>10A1</td><td><span class="badge bg-success">Khen thưởng</span></td><td>Tích cực tham gia phong trào</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#discipline-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>01/09</td><td>Phạm Thị Dung</td><td>12A3</td><td><span class="badge bg-warning text-dark">Nhắc nhở</span></td><td>Chưa làm bài tập về nhà</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#discipline-modal"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr></tbody></table></div></div>${createPaginationFooter(1, 4, 32)}</div>`,
        'school-data': `<div class="d-flex justify-content-between align-items-center mb-4"><h3>Dữ liệu Trường học (Dữ liệu nguồn)</h3></div><div class="card"><div class="card-body"><ul class="nav nav-tabs nav-tabs-responsive mb-3"><li class="nav-item"><a class="nav-link active" data-bs-toggle="tab" href="#tab-years">Năm học</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-subjects">Môn học</a></li><li class="nav-item"><a class="nav-link" data-bs-toggle="tab" href="#tab-departments">Tổ chuyên môn</a></li></ul><div class="tab-content"><div class="tab-pane active" id="tab-years"><div class="d-flex justify-content-end mb-3"><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#master-data-modal" data-label="Năm học"><i class="fas fa-plus me-2"></i>Thêm Năm học</button></div><table class="table table-hover"><thead><th>Tên Năm học</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>2024-2025</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#master-data-modal" data-label="Năm học"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>2023-2024</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#master-data-modal" data-label="Năm học"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr></tbody></table></div><div class="tab-pane" id="tab-subjects"><div class="d-flex justify-content-end mb-3"><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#master-data-modal" data-label="Môn học"><i class="fas fa-plus me-2"></i>Thêm Môn học</button></div><table class="table table-hover"><thead><th>Tên Môn học</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>Toán</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#master-data-modal" data-label="Môn học"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>Ngữ văn</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#master-data-modal" data-label="Môn học"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr></tbody></table></div><div class="tab-pane" id="tab-departments"><div class="d-flex justify-content-end mb-3"><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#master-data-modal" data-label="Tổ chuyên môn"><i class="fas fa-plus me-2"></i>Thêm Tổ</button></div><table class="table table-hover"><thead><th>Tên Tổ</th><th class="text-center">Hành động</th></tr></thead><tbody><tr><td>Tổ Toán - Tin</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#master-data-modal" data-label="Tổ chuyên môn"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr><tr><td>Tổ Ngoại ngữ</td><td class="text-center"><div class="btn-group btn-group-sm"><button class="btn btn-outline-warning" data-bs-toggle="modal" data-bs-target="#master-data-modal" data-label="Tổ chuyên môn"><i class="fas fa-edit"></i></button><button class="btn btn-outline-danger"><i class="fas fa-trash"></i></button></div></td></tr></tbody></table></div></div></div></div>`,
        roles: `<h3 class="mb-4">Phân quyền & Vai trò</h3><div class="row"><div class="col-md-4"><div class="card shadow-sm"><div class="card-header d-flex justify-content-between align-items-center"><span>Danh sách Vai trò</span><button class="btn btn-sm btn-primary" data-bs-toggle="modal" data-bs-target="#role-modal"><i class="fas fa-plus"></i></button></div><div class="list-group list-group-flush"><a href="#" class="list-group-item list-group-item-action active">Ban Giám Hiệu</a><a href="#" class="list-group-item list-group-item-action">GV Chủ nhiệm</a><a href="#" class="list-group-item list-group-item-action">Kế toán</a><a href="#" class="list-group-item list-group-item-action">Phụ huynh</a></div></div></div><div class="col-md-8"><div class="card shadow-sm"><div class="card-header">Quyền cho vai trò: <strong class="text-primary">Ban Giám Hiệu</strong></div><div class="card-body"><div class="table-responsive"><table class="table table-sm table-bordered align-middle"><thead><tr><th>Module</th><th class="text-center">Xem</th><th class="text-center">Thêm</th><th class="text-center">Sửa</th><th class="text-center">Xóa</th><th class="text-center">Duyệt</th></tr></thead><tbody><tr><td>Hồ sơ Học sinh</td><td class="text-center"><input class="form-check-input" type="checkbox" checked></td><td class="text-center"><input class="form-check-input" type="checkbox" checked></td><td class="text-center"><input class="form-check-input" type="checkbox" checked></td><td class="text-center"><input class="form-check-input" type="checkbox" checked></td><td class="text-center">-</td></tr><tr><td>Hồ sơ Nhân sự</td><td class="text-center"><input class="form-check-input" type="checkbox" checked></td><td class="text-center"><input class="form-check-input" type="checkbox" checked></td><td class="text-center"><input class="form-check-input" type="checkbox" checked></td><td class="text-center"><input class="form-check-input" type="checkbox" checked></td><td class="text-center">-</td></tr><tr><td>Học phí</td><td class="text-center"><input class="form-check-input" type="checkbox" checked></td><td class="text-center"><input class="form-check-input" type="checkbox" checked></td><td class="text-center"><input class="form-check-input" type="checkbox" checked></td><td class="text-center"><input class="form-check-input" type="checkbox" disabled></td><td class="text-center"><input class="form-check-input" type="checkbox" checked></td></tr><tr><td>Đơn nghỉ phép</td><td class="text-center"><input class="form-check-input" type="checkbox" checked></td><td class="text-center"><input class="form-check-input" type="checkbox" disabled></td><td class="text-center"><input class="form-check-input" type="checkbox" disabled></td><td class="text-center"><input class="form-check-input" type="checkbox" disabled></td><td class="text-center"><input class="form-check-input" type="checkbox" checked></td></tr></tbody></table></div><div class="text-end mt-3"><button class="btn btn-primary"><i class="fas fa-save me-2"></i>Lưu thay đổi</button></div></div>${createPaginationFooter(1, 4, 15)}</div></div></div>`,
        'user-guide': `<div class="d-flex justify-content-between align-items-center mb-4"><h3>Hướng dẫn sử dụng</h3><button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#guide-modal"><i class="fas fa-plus me-2"></i>Thêm Hướng dẫn</button></div><div class="accordion" id="userGuideAccordion"><div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#guide-1"><i class="fas fa-chalkboard-teacher fa-fw me-3"></i>Làm thế nào để điểm danh cho lớp chủ nhiệm?</button></h2><div id="guide-1" class="accordion-collapse collapse show" data-bs-parent="#userGuideAccordion"><div class="accordion-body"><p>Chức năng điểm danh hàng ngày là công cụ quan trọng giúp GVCN nắm bắt sĩ số lớp. Để thực hiện, vui lòng làm theo các bước sau:</p><ol><li>Từ menu bên trái, vào mục <strong>Học vụ > Lớp học > Điểm danh</strong>.</li><li>Nhấn nút <strong>"Điểm danh hôm nay"</strong>.</li><li>Chọn đúng ngày và lớp mình phụ trách từ các bộ lọc ở trên.</li><li>Hệ thống sẽ hiển thị danh sách học sinh của lớp. Tại cột "Trạng thái", tick chọn tình trạng tương ứng cho mỗi học sinh: Có mặt, Vắng (P) - có phép, hoặc Vắng (K) - không phép.</li><li>Đối với các trường hợp vắng, có thể ghi chú thêm lý do vào ô bên cạnh.</li><li>Sau khi hoàn tất, nhấn nút <strong>"Lưu điểm danh"</strong> ở cuối trang để xác nhận.</li></ol><div class="mt-3"><img src="https://i.imgur.com/3Z3Z3jA.png" class="img-fluid rounded border" alt="Ảnh minh họa điểm danh"></div></div></div></div><div class="accordion-item"><h2 class="accordion-header"><button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#guide-2"><i class="fas fa-video fa-fw me-3"></i>Video Hướng dẫn Nhập điểm từ file Excel</button></h2><div id="guide-2" class="accordion-collapse collapse" data-bs-parent="#userGuideAccordion"><div class="accordion-body"><p>Để tiết kiệm thời gian, hệ thống cho phép giáo viên nhập điểm hàng loạt từ file Excel. Vui lòng xem video hướng dẫn chi tiết dưới đây để thực hiện đúng thao tác.</p><div class="ratio ratio-16x9 mt-3"><iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div></div></div></div></div>`,
        'my-profile': `<h3 class="mb-4">Thông tin cá nhân</h3><div class="card shadow-sm"><div class="card-header">Thông tin tài khoản</div><div class="card-body"><div class="row g-4"><div class="col-md-4 text-center"><img src="https://i.pravatar.cc/150?u=admin" class="rounded-circle img-thumbnail mb-3" alt="Avatar"><input type="file" id="avatarUpload" class="d-none"><label for="avatarUpload" class="btn btn-outline-primary"><i class="fas fa-camera me-2"></i>Đổi ảnh đại diện</label></div><div class="col-md-8"><form><h5>Thông tin cơ bản</h5><div class="row g-3 mb-4"><div class="col-md-6"><label class="form-label">Họ và tên</label><input type="text" class="form-control" value="Cô Hiệu Trưởng"></div><div class="col-md-6"><label class="form-label">Email</label><input type="email" class="form-control" value="hieutruong@school.edu.vn"></div><div class="col-md-6"><label class="form-label">Số điện thoại</label><input type="text" class="form-control" value="0901234567"></div></div><h5>Đổi mật khẩu</h5><div class="row g-3"><div class="col-md-4"><label class="form-label">Mật khẩu cũ</label><input type="password" class="form-control"></div><div class="col-md-4"><label class="form-label">Mật khẩu mới</label><input type="password" class="form-control"></div><div class="col-md-4"><label class="form-label">Xác nhận MK mới</label><input type="password" class="form-control"></div></div><div class="mt-4"><button type="submit" class="btn btn-success"><i class="fas fa-save me-2"></i>Lưu thay đổi</button></div></form></div></div></div></div>`,
    };
    // === END: All View Templates ===

    // === START: JS Functions ===
    function updateSidebarTooltips() {
        bsTooltipList.forEach(t => t.dispose());
        bsTooltipList = [];
        const isCollapsed = document.body.classList.contains('sidebar-collapsed');
        const links = sidebar.querySelectorAll('.components > li > a');
        if (isCollapsed) {
            links.forEach(link => {
                const title = link.querySelector('span')?.textContent;
                if (title) {
                    link.setAttribute('data-bs-toggle', 'tooltip');
                    link.setAttribute('data-bs-placement', 'right');
                    link.setAttribute('title', title);
                }
            });
            bsTooltipList = [...sidebar.querySelectorAll('[data-bs-toggle="tooltip"]')].map(el => new bootstrap.Tooltip(el));
        }
    }

    function renderView(viewId) {
        globalSearchInput.placeholder = searchPlaceholders[viewId] || 'Tìm kiếm...';
        mainContentArea.innerHTML = viewTemplates[viewId] || `<div class="p-5"><h3>Chức năng [${viewId}] đang được phát triển...</h3><p>Vui lòng quay lại sau.</p></div>`;
        mainContentArea.classList.add('active');
        setTimeout(() => mainContentArea.classList.remove('active'), 500);

        if (viewId === 'dashboard') {
            if (studentPerformanceChartInstance) studentPerformanceChartInstance.destroy();
            if (attendanceRateChartInstance) attendanceRateChartInstance.destroy();
            
            const performanceChartEl = document.getElementById('studentPerformanceChart');
            if (performanceChartEl) {
                studentPerformanceChartInstance = new ApexCharts(performanceChartEl, {
                    series: [45, 30, 20, 5], chart: { height: 250, type: 'donut' },
                    labels: ['Giỏi', 'Khá', 'Trung bình', 'Yếu'], colors: ['#28a745', '#17a2b8', '#ffc107', '#dc3545'], legend: { position: 'bottom' }
                });
                studentPerformanceChartInstance.render();
            }

            const attendanceChartEl = document.getElementById('attendanceRateChart');
            if (attendanceChartEl) {
                attendanceRateChartInstance = new Chart(attendanceChartEl, {
                    type: 'bar',
                    data: {
                        labels: ['Khối 10', 'Khối 11', 'Khối 12'],
                        datasets: [{ label: 'Tỷ lệ chuyên cần (%)', data: [98.5, 99.1, 97.8], backgroundColor: 'rgba(13, 110, 253, 0.7)' }]
                    },
                    options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, max: 100 } } }
                });
            }
        }
    }
    
    function setActiveLink(targetLink) {
        document.querySelectorAll('#sidebar .components li').forEach(li => li.classList.remove('active'));
        if (targetLink) {
            const parentLi = targetLink.closest('li');
            if (parentLi) {
                parentLi.classList.add('active');
                const submenu = targetLink.closest('.collapse');
                if (submenu) {
                    const trigger = document.querySelector(`a[href="#${submenu.id}"]`);
                    if (trigger) {
                        trigger.closest('li').classList.add('active');
                        if (!submenu.classList.contains('show')) {
                            new bootstrap.Collapse(submenu).show();
                        }
                    }
                }
            }
        }
    }

    function toggleMobileSidebar() {
        sidebar.classList.toggle('show');
        sidebarOverlay.classList.toggle('active');
    }

    desktopSidebarToggleBtn.addEventListener('click', () => {
        document.body.classList.toggle('sidebar-collapsed');
        updateSidebarTooltips();
        // Trigger window resize to fix charts if they don't auto-resize
        window.dispatchEvent(new Event('resize'));
    });
    mobileSidebarToggleBtn.addEventListener('click', toggleMobileSidebar);
    sidebarOverlay.addEventListener('click', toggleMobileSidebar);

    document.body.addEventListener('click', (e) => {
        const link = e.target.closest('.nav-link, .nav-link-profile');
        if (link && link.dataset.view) {
            e.preventDefault();
            renderView(link.dataset.view);
            setActiveLink(link.closest('#sidebar .nav-link'));
            if (window.innerWidth < 992 && sidebar.classList.contains('show')) {
                toggleMobileSidebar();
            }
        }
    });

    const masterDataModal = document.getElementById('master-data-modal');
    if(masterDataModal) {
        masterDataModal.addEventListener('show.bs.modal', function (event) {
            const button = event.relatedTarget;
            const labelText = button.getAttribute('data-label');
            if (labelText) {
                const modalTitle = masterDataModal.querySelector('.modal-title');
                const formLabel = masterDataModal.querySelector('#master-data-name-label');
                modalTitle.textContent = 'Thêm/Sửa ' + labelText;
                formLabel.textContent = labelText;
            }
        });
    }

    // Initial Load
    renderView('dashboard');
    setActiveLink(document.querySelector(`#sidebar .nav-link[data-view="dashboard"]`));
    updateSidebarTooltips();
    // === END: JS Functions ===
});
</script>
</body>
</html>
